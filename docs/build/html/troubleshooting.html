

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Troubleshooting Guide &mdash; portfolio-lib v1.0.1 Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=97502c36" />

  
    <link rel="canonical" href="https://your-username.github.io/Portfolio-lib/troubleshooting.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c4955cf7"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="portfolio_lib.portfolio module" href="portfolio_lib.portfolio.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            portfolio-lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">portfolio_lib Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="visual_guide.html">Visual Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Support:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#common-installation-issues">Common Installation Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#importerror-no-module-named-portfolio-lib">ImportError: No module named ‘portfolio_lib’</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modulenotfounderror-no-module-named-numpy">ModuleNotFoundError: No module named ‘numpy’</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-conflicts">Version Conflicts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#common-runtime-errors">Common Runtime Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#valueerror-array-length-mismatch">ValueError: array length mismatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexerror-index-out-of-range">IndexError: index out of range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nan-values-in-results">NaN Values in Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memory-and-performance-issues">Memory and Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#slow-performance-with-large-datasets">Slow Performance with Large Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-usage-with-large-arrays">Memory Usage with Large Arrays</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-quality-issues">Data Quality Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#missing-or-invalid-data">Missing or Invalid Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-time-issues">Date/Time Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#calculation-errors">Calculation Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incorrect-technical-indicator-values">Incorrect Technical Indicator Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unexpected-portfolio-values">Unexpected Portfolio Values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-and-integration-issues">API and Integration Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wrong-function-signatures">Wrong Function Signatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-errors">Type Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#environment-and-system-issues">Environment and System Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#platform-specific-issues">Platform-Specific Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jupyter-notebook-issues">Jupyter Notebook Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slow-calculation-tips">Slow Calculation Tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-optimization">Memory Optimization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debug-information-collection">Debug Information Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimal-reproducible-example">Minimal Reproducible Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#community-resources">Community Resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#frequently-asked-questions">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-code-reference">Error Code Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preventive-measures">Preventive Measures</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">portfolio-lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Troubleshooting Guide</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/your-username/Portfolio-lib/blob/main/docs/source/troubleshooting.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="troubleshooting-guide">
<h1>Troubleshooting Guide<a class="headerlink" href="#troubleshooting-guide" title="Link to this heading"></a></h1>
<p>This guide helps you solve common issues when using portfolio-lib.</p>
<section id="common-installation-issues">
<h2>Common Installation Issues<a class="headerlink" href="#common-installation-issues" title="Link to this heading"></a></h2>
<section id="importerror-no-module-named-portfolio-lib">
<h3>ImportError: No module named ‘portfolio_lib’<a class="headerlink" href="#importerror-no-module-named-portfolio-lib" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: After installation, you get an import error.</p>
<p><strong>Possible Causes &amp; Solutions</strong>:</p>
<ol class="arabic">
<li><p><strong>Wrong Python environment</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check which Python you&#39;re using</span>
which<span class="w"> </span>python
which<span class="w"> </span>pip

<span class="c1"># Make sure you&#39;re in the right environment</span>
conda<span class="w"> </span>env<span class="w"> </span>list<span class="w">  </span><span class="c1"># or</span>
pip<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>portfolio-lib
</pre></div>
</div>
</li>
<li><p><strong>Installation in wrong location</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reinstall in current environment</span>
pip<span class="w"> </span>uninstall<span class="w"> </span>portfolio-lib
pip<span class="w"> </span>install<span class="w"> </span>portfolio-lib
</pre></div>
</div>
</li>
<li><p><strong>Development installation issues</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># For development install</span>
<span class="nb">cd</span><span class="w"> </span>/path/to/portfolio-lib
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
</li>
</ol>
</section>
<section id="modulenotfounderror-no-module-named-numpy">
<h3>ModuleNotFoundError: No module named ‘numpy’<a class="headerlink" href="#modulenotfounderror-no-module-named-numpy" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Missing dependencies.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install all dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>numpy<span class="w"> </span>pandas<span class="w"> </span>matplotlib<span class="w"> </span>scipy

<span class="c1"># Or reinstall portfolio-lib (should install dependencies)</span>
pip<span class="w"> </span>install<span class="w"> </span>--force-reinstall<span class="w"> </span>portfolio-lib
</pre></div>
</div>
</section>
<section id="version-conflicts">
<h3>Version Conflicts<a class="headerlink" href="#version-conflicts" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Dependency version conflicts.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create fresh environment</span>
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>portfolio_clean<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9
conda<span class="w"> </span>activate<span class="w"> </span>portfolio_clean
pip<span class="w"> </span>install<span class="w"> </span>portfolio-lib

<span class="c1"># Or update conflicting packages</span>
pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>numpy<span class="w"> </span>pandas<span class="w"> </span>matplotlib
</pre></div>
</div>
</section>
</section>
<section id="common-runtime-errors">
<h2>Common Runtime Errors<a class="headerlink" href="#common-runtime-errors" title="Link to this heading"></a></h2>
<section id="valueerror-array-length-mismatch">
<h3>ValueError: array length mismatch<a class="headerlink" href="#valueerror-array-length-mismatch" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Input arrays have different lengths.</p>
<p><strong>Example Error</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">102</span><span class="p">]</span>
<span class="n">volumes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1100</span><span class="p">]</span>  <span class="c1"># One element short!</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">vwap</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">volumes</span><span class="p">)</span>
<span class="c1"># ValueError: arrays must have same length</span>
</pre></div>
</div>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Always check array lengths</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">volumes</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Length mismatch: prices=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span><span class="si">}</span><span class="s2">, volumes=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">volumes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Or align arrays</span>
<span class="n">min_length</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">volumes</span><span class="p">))</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[:</span><span class="n">min_length</span><span class="p">]</span>
<span class="n">volumes</span> <span class="o">=</span> <span class="n">volumes</span><span class="p">[:</span><span class="n">min_length</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="indexerror-index-out-of-range">
<h3>IndexError: index out of range<a class="headerlink" href="#indexerror-index-out-of-range" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Accessing array elements that don’t exist.</p>
<p><strong>Example Error</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">102</span><span class="p">]</span>
<span class="n">sma</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>  <span class="c1"># Period longer than data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sma</span><span class="p">[</span><span class="mi">19</span><span class="p">])</span>  <span class="c1"># IndexError!</span>
</pre></div>
</div>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if enough data is available</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">period</span><span class="p">:</span>
    <span class="n">sma</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>
    <span class="c1"># Only use valid values (non-NaN)</span>
    <span class="n">valid_sma</span> <span class="o">=</span> <span class="n">sma</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">sma</span><span class="p">)]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Need at least </span><span class="si">{</span><span class="n">period</span><span class="si">}</span><span class="s2"> data points, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="nan-values-in-results">
<h3>NaN Values in Results<a class="headerlink" href="#nan-values-in-results" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Getting NaN (Not a Number) values in calculations.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">104</span><span class="p">]</span>
<span class="n">rsi</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">rsi</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span>  <span class="c1"># [nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan, 50.0, ...]</span>
</pre></div>
</div>
<p><strong>Explanation</strong>: RSI needs at least 14 periods to calculate. Earlier values are NaN.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter out NaN values</span>
<span class="n">rsi</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">rsi</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="n">valid_rsi</span> <span class="o">=</span> <span class="n">rsi</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">rsi</span><span class="p">)]</span>

<span class="c1"># Or check for sufficient data</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">14</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Latest RSI: </span><span class="si">{</span><span class="n">rsi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Need more data for RSI calculation&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="memory-and-performance-issues">
<h2>Memory and Performance Issues<a class="headerlink" href="#memory-and-performance-issues" title="Link to this heading"></a></h2>
<section id="slow-performance-with-large-datasets">
<h3>Slow Performance with Large Datasets<a class="headerlink" href="#slow-performance-with-large-datasets" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Calculations are slow with large amounts of data.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Use NumPy arrays instead of Python lists</span>
<span class="n">prices_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span>  <span class="c1"># Slow</span>
<span class="n">prices_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices_list</span><span class="p">)</span>  <span class="c1"># Fast</span>

<span class="c1"># Vectorize calculations when possible</span>
<span class="c1"># Instead of:</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)):</span>
    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">some_calculation</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>

<span class="c1"># Use:</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="n">some_calculation</span><span class="p">)(</span><span class="n">prices</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="memory-usage-with-large-arrays">
<h3>Memory Usage with Large Arrays<a class="headerlink" href="#memory-usage-with-large-arrays" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Running out of memory with large datasets.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process data in chunks</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_large_dataset</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">chunk_size</span><span class="p">]</span>
        <span class="n">chunk_result</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">chunk_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="c1"># Use appropriate data types</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>  <span class="c1"># Use float32 instead of float64 if precision allows</span>
</pre></div>
</div>
</section>
</section>
<section id="data-quality-issues">
<h2>Data Quality Issues<a class="headerlink" href="#data-quality-issues" title="Link to this heading"></a></h2>
<section id="missing-or-invalid-data">
<h3>Missing or Invalid Data<a class="headerlink" href="#missing-or-invalid-data" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Data contains missing values, zeros, or invalid prices.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">clean_price_data</span><span class="p">(</span><span class="n">prices</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clean and validate price data&quot;&quot;&quot;</span>
    <span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Remove or interpolate missing values</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">prices</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">prices</span><span class="p">))</span><span class="si">}</span><span class="s2"> missing values found&quot;</span><span class="p">)</span>
        <span class="c1"># Forward fill</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
        <span class="n">prices</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="n">mask</span><span class="p">),</span>
                                <span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="o">~</span><span class="n">mask</span><span class="p">),</span>
                                <span class="n">prices</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">])</span>

    <span class="c1"># Check for non-positive prices</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">prices</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: Non-positive prices found&quot;</span><span class="p">)</span>
        <span class="n">prices</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">prices</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Check for extreme outliers (&gt; 10x daily moves)</span>
    <span class="n">returns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">/</span> <span class="n">prices</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">outliers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">returns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.10</span>  <span class="c1"># 10% daily moves</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">outliers</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span><span class="si">}</span><span class="s2"> potential outliers found&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">prices</span>

<span class="c1"># Usage</span>
<span class="n">raw_prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">105</span><span class="p">]</span>  <span class="c1"># Problematic data</span>
<span class="n">clean_prices</span> <span class="o">=</span> <span class="n">clean_price_data</span><span class="p">(</span><span class="n">raw_prices</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="date-time-issues">
<h3>Date/Time Issues<a class="headerlink" href="#date-time-issues" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Incorrect date handling or time zone issues.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Always use proper datetime objects</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="c1"># Handle time zones explicitly</span>
<span class="n">dates_utc</span> <span class="o">=</span> <span class="n">dates</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="n">dates_ny</span> <span class="o">=</span> <span class="n">dates_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;America/New_York&#39;</span><span class="p">)</span>

<span class="c1"># Align data with trading calendar</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pandas.tseries.offsets</span><span class="w"> </span><span class="kn">import</span> <span class="n">BDay</span>
<span class="n">business_days</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">BDay</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="calculation-errors">
<h2>Calculation Errors<a class="headerlink" href="#calculation-errors" title="Link to this heading"></a></h2>
<section id="incorrect-technical-indicator-values">
<h3>Incorrect Technical Indicator Values<a class="headerlink" href="#incorrect-technical-indicator-values" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Indicator values don’t match expected results.</p>
<p><strong>Debugging Steps</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Verify input data</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Price data: </span><span class="si">{</span><span class="n">prices</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>  <span class="c1"># First 10 values</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 2. Check parameters</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">14</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calculation period: </span><span class="si">{</span><span class="n">period</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. Manual calculation for verification</span>
<span class="k">def</span><span class="w"> </span><span class="nf">manual_sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">period</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">period</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="o">-</span><span class="n">period</span><span class="p">:])</span>

<span class="c1"># Compare with library function</span>
<span class="n">lib_sma</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">period</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">manual_sma_val</span> <span class="o">=</span> <span class="n">manual_sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">period</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Library SMA: </span><span class="si">{</span><span class="n">lib_sma</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Manual SMA: </span><span class="si">{</span><span class="n">manual_sma_val</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Difference: </span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="n">lib_sma</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">manual_sma_val</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="unexpected-portfolio-values">
<h3>Unexpected Portfolio Values<a class="headerlink" href="#unexpected-portfolio-values" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Portfolio calculations give unexpected results.</p>
<p><strong>Debugging</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Track each component</span>
<span class="n">portfolio</span> <span class="o">=</span> <span class="n">Portfolio</span><span class="p">(</span><span class="n">initial_cash</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial cash: $</span><span class="si">{</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Add position and track changes</span>
<span class="n">position</span> <span class="o">=</span> <span class="n">Position</span><span class="p">(</span><span class="s2">&quot;STOCK1&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="n">portfolio</span><span class="o">.</span><span class="n">add_position</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After adding position:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Cash: $</span><span class="si">{</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Position value: $</span><span class="si">{</span><span class="n">position</span><span class="o">.</span><span class="n">quantity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">position</span><span class="o">.</span><span class="n">entry_price</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Total value: $</span><span class="si">{</span><span class="n">portfolio</span><span class="o">.</span><span class="n">get_total_value</span><span class="p">()</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="api-and-integration-issues">
<h2>API and Integration Issues<a class="headerlink" href="#api-and-integration-issues" title="Link to this heading"></a></h2>
<section id="wrong-function-signatures">
<h3>Wrong Function Signatures<a class="headerlink" href="#wrong-function-signatures" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Function called with incorrect parameters.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check function documentation</span>
<span class="n">help</span><span class="p">(</span><span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">bollinger_bands</span><span class="p">)</span>

<span class="c1"># Use correct parameters</span>
<span class="n">upper</span><span class="p">,</span> <span class="n">middle</span><span class="p">,</span> <span class="n">lower</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">bollinger_bands</span><span class="p">(</span>
    <span class="n">prices</span><span class="o">=</span><span class="n">prices</span><span class="p">,</span>
    <span class="n">period</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">std_dev</span><span class="o">=</span><span class="mf">2.0</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="type-errors">
<h3>Type Errors<a class="headerlink" href="#type-errors" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Passing wrong data types to functions.</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ensure correct types</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>  <span class="c1"># Convert to float array</span>
<span class="n">period</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">period</span><span class="p">)</span>                    <span class="c1"># Ensure integer period</span>

<span class="c1"># Validate inputs</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)),</span> <span class="s2">&quot;Prices must be array-like&quot;</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Prices array cannot be empty&quot;</span>
<span class="k">assert</span> <span class="n">period</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Period must be positive&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="environment-and-system-issues">
<h2>Environment and System Issues<a class="headerlink" href="#environment-and-system-issues" title="Link to this heading"></a></h2>
<section id="platform-specific-issues">
<h3>Platform-Specific Issues<a class="headerlink" href="#platform-specific-issues" title="Link to this heading"></a></h3>
<p><strong>Windows Issues</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Visual C++ Build Tools if needed</span>
<span class="c1"># Use pre-compiled wheels</span>
pip<span class="w"> </span>install<span class="w"> </span>--only-binary<span class="o">=</span>all<span class="w"> </span>portfolio-lib
</pre></div>
</div>
<p><strong>macOS Issues</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Xcode command line tools</span>
xcode-select<span class="w"> </span>--install

<span class="c1"># Use Homebrew Python</span>
brew<span class="w"> </span>install<span class="w"> </span>python
pip3<span class="w"> </span>install<span class="w"> </span>portfolio-lib
</pre></div>
</div>
<p><strong>Linux Issues</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install development packages</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python3-dev<span class="w"> </span>build-essential

<span class="c1"># Or use conda</span>
conda<span class="w"> </span>install<span class="w"> </span>portfolio-lib
</pre></div>
</div>
</section>
<section id="jupyter-notebook-issues">
<h3>Jupyter Notebook Issues<a class="headerlink" href="#jupyter-notebook-issues" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Issues running in Jupyter notebooks.</p>
<p><strong>Solutions</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restart kernel if imports fail</span>
<span class="c1"># Kernel -&gt; Restart &amp; Clear Output</span>

<span class="c1"># Check kernel Python version</span>
import<span class="w"> </span>sys
print<span class="o">(</span>sys.executable<span class="o">)</span>
print<span class="o">(</span>sys.version<span class="o">)</span>

<span class="c1"># Install in notebook environment</span>
pip<span class="w"> </span>install<span class="w"> </span>portfolio-libPerformance<span class="w"> </span>Optimization
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="slow-calculation-tips">
<h3>Slow Calculation Tips<a class="headerlink" href="#slow-calculation-tips" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Use NumPy arrays</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>

<span class="c1"># 2. Avoid loops when possible</span>
<span class="c1"># Instead of:</span>
<span class="n">smas</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)):</span>
    <span class="n">sma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">20</span><span class="p">:</span><span class="n">i</span><span class="p">])</span>
    <span class="n">smas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sma</span><span class="p">)</span>

<span class="c1"># Use vectorized operations:</span>
<span class="n">smas</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># 3. Cache calculations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cached_sma</span><span class="p">(</span><span class="n">prices_tuple</span><span class="p">,</span> <span class="n">period</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices_tuple</span><span class="p">),</span> <span class="n">period</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="memory-optimization">
<h3>Memory Optimization<a class="headerlink" href="#memory-optimization" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use appropriate data types</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>  <span class="c1"># vs np.float64</span>

<span class="c1"># Process in chunks for large datasets</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_chunks</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">chunk_size</span><span class="p">]</span>

<span class="c1"># Clean up large objects</span>
<span class="k">del</span> <span class="n">large_array</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gc</span>
<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="getting-help">
<h2>Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading"></a></h2>
<section id="debug-information-collection">
<h3>Debug Information Collection<a class="headerlink" href="#debug-information-collection" title="Link to this heading"></a></h3>
<p>When reporting issues, include:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">portfolio_lib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Debug Information:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;portfolio-lib version: </span><span class="si">{</span><span class="n">portfolio_lib</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NumPy version: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pandas version: </span><span class="si">{</span><span class="n">pd</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Python version: </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Platform: </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="minimal-reproducible-example">
<h3>Minimal Reproducible Example<a class="headerlink" href="#minimal-reproducible-example" title="Link to this heading"></a></h3>
<p>Create a minimal example that reproduces the issue:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">portfolio_lib.indicators</span><span class="w"> </span><span class="kn">import</span> <span class="n">TechnicalIndicators</span>

<span class="c1"># Minimal data that causes the issue</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">98</span><span class="p">]</span>  <span class="c1"># Your problematic data</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="community-resources">
<h3>Community Resources<a class="headerlink" href="#community-resources" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GitHub Issues</strong>: Report bugs and feature requests</p></li>
<li><p><strong>Documentation</strong>: Complete API reference</p></li>
<li><p><strong>Stack Overflow</strong>: Tag questions with <cite>portfolio-lib</cite></p></li>
<li><p><strong>Community Forums</strong>: Join discussions with other users</p></li>
</ul>
</section>
</section>
<section id="frequently-asked-questions">
<h2>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading"></a></h2>
<p><strong>Q: Why are my indicator values different from other libraries?</strong></p>
<p>A: Different libraries may use slightly different calculation methods. Check:
- How NaN values are handled
- Whether adjustments are made for weekends/holidays
- Rounding precision differences</p>
<p><strong>Q: Can I use real-time data feeds?</strong></p>
<p>A: Yes, but ensure your data feed provides clean, properly formatted data. Implement error handling for data quality issues.</p>
<p><strong>Q: How do I handle corporate actions (splits, dividends)?</strong></p>
<p>A: Adjust historical prices for splits and consider dividend reinvestment for accurate return calculations.</p>
<p><strong>Q: What’s the best way to backtest strategies?</strong></p>
<p>A: Use out-of-sample data, account for transaction costs, avoid look-ahead bias, and test across different market conditions.</p>
</section>
<section id="error-code-reference">
<h2>Error Code Reference<a class="headerlink" href="#error-code-reference" title="Link to this heading"></a></h2>
<p>Common error patterns and their meanings:</p>
<ul class="simple">
<li><p><strong>E001</strong>: Array length mismatch - Input arrays have different sizes</p></li>
<li><p><strong>E002</strong>: Insufficient data - Not enough data points for calculation</p></li>
<li><p><strong>E003</strong>: Invalid parameter - Parameter out of valid range</p></li>
<li><p><strong>E004</strong>: Type error - Wrong data type provided</p></li>
<li><p><strong>E005</strong>: Memory error - Dataset too large for available memory</p></li>
</ul>
</section>
<section id="preventive-measures">
<h2>Preventive Measures<a class="headerlink" href="#preventive-measures" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Always validate inputs</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_price_data</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Prices must be array-like&quot;</span><span class="p">)</span>

    <span class="n">prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">min_length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Need at least </span><span class="si">{</span><span class="n">min_length</span><span class="si">}</span><span class="s2"> data points&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">prices</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Prices contain NaN values&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">prices</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Prices must be positive&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">prices</span>

<span class="c1"># Use in your code</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">clean_prices</span> <span class="o">=</span> <span class="n">validate_price_data</span><span class="p">(</span><span class="n">raw_prices</span><span class="p">,</span> <span class="n">min_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">sma</span> <span class="o">=</span> <span class="n">TechnicalIndicators</span><span class="o">.</span><span class="n">sma</span><span class="p">(</span><span class="n">clean_prices</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data validation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="portfolio_lib.portfolio.html" class="btn btn-neutral float-left" title="portfolio_lib.portfolio module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Rahul Ashok, Pritham Devaprasad, Siddarth S, Anish R.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>